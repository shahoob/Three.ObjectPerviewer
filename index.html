<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="div.css">
  <link rel="stylesheet" type="text/css" href="bootstrap.css">
	<title>Three.ObjectPerviewer 1.0</title>
  <style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
	</style>
</head>
<body>



<form>
<div class="form">
	<label for="objectData">Object File:</label>
	<input type="file" class="form-control-file" id="objectData" accept=".json">
	<label for="animationData">Animation File:</label>
	<input type="file" class="form-control-file" id="animationData" accept=".json,.js">
	<label for="textureImage">Texture File:</label>
	<input type="file" class="form-control-file" id="textureImage" accept=".jpg">
	<label for="bufferGeometryData">Buffer Geometry File:</label>
	<input type="file" class="form-control-file" id="bufferGeometryData" accept=".json">
	<label for="materialData">Material File:</label>
	<input type="file" iclass="form-control-file" id="materialData" accept=".json">
	<button id="Preview">Preview</button>
</div>
</form>

<div class="loading">

</div>
<script src="preview_system.js"></script>
<div class="card text-center" id="card_preview">
<h5 class="card-header">Preview</h5>
<div class="card-body" id="card_preview_content">

</div>

</div>

<script src="three.js"></script>
<script>
console.log("Three.ObjectPerviewer DEBUGGING SYSTEM 1.1");
console.log("DIVS:");
console.log(divs);
let divs = document.getElementsByTagName("div")
var Preview = document.getElementById("Perview");
Preview.onclick = function() {
        var pathObject = document.getElementById("objectData").value;
        var pathAnimation = document.getElementById("animationData").value;
        var pathTexture = document.getElementById("textureImage").value;
        var pathBuffer = document.getElementById("bufferGeometryData").value;
        var pathMaterial = document.getElementById("materialData").value;
        console.log("PREPARING SYSTEM BEFORE LOAD...");
        console.log("DEFINE: animationLoader = new THREE.AnimateLoader();");
        var animationLoader = new THREE.AnimationLoader();
        console.log("DEFINE: objectLoader = new THREE.ObjectLoader();");
        var objectLoader = new THREE.ObjectLoader();
        console.log("DEFINE: textureLoader = new THREE.TextureLoader();");
        var textureLoader = new THREE.TextureLoader();
        console.log("DEFINE: bufferGeometryLoader = new THREE.BufferGeometryLoader();");
        var bufferGeometryLoader = new THREE.BufferGeometryLoader();
        console.log("DEFINE: materialLoader = new THREE.MaterialLoader();");
        var materialLoader = new THREE.MaterialLoader();
        console.log("SYSTEM READY");
        console.log("HIDING FORM...");
        form.style.visibility = 'hidden';
        console.log("SHOWING LOADING SCREEN...");
        loading.style.visibility = 'visible';

        if (pathBufferGeometry) {
            bufferGeometryLoader.load(
                pathBuffer,

                function(geometry) {
                    var bufferGeometryData1 = geometry;
                },

                function(xhr) {
                    console.log("LOADING" + pathBuffer + (xhr.loaded / xhr.total * 100) + "%");
                },

                function(err) {
                    console.error(err);
                }
            );

            if (pathObject) {
                objectLoader.load(
                    pathObject,

                    function(obj) {
                        var objectData1 = obj;
                    },

                    function(xhr) {
                        console.log("LOADING" + pathObject + (xhr.loaded / xhr.total * 100) + "%");
                    },

                    function(err) {
                        console.error(err);
                    }
                );
            };

            if (pathTexture) {
                textureLoader.load(
                    pathTexture,

                    function(texture) {
                        var textureData1 = texture;
                    },

                    undefined,

                    function(err) {
                        console.error(err);
                    }
                );

                if (pathMaterial) {
                    materialLoader.load(
                        pathMaterial,

                        function(material) {
                            var materialData1 = material;
                        },

                        function(xhr) {
                            console.log("LOADING" + pathMaterial + (xhr.loaded / xhr.total * 100) + "%");
                        },

                        function(err) {
                            console.error(err);
                        }
                    );
</script>
</body>
</html>
