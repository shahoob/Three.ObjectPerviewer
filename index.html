<!DOCTYPE html>
<html>
<head>
<style>
body {
  background: #555;
}

.form {
  max-width: 500px;
  margin: auto;
  background: white;
  padding: 10px;
}

.loading {
  max-width: 500px;
  margin: auto;
  background: white;
  padding: 10px;
}
</style>
	<title>Three.ObjectPerviewer 1.0</title>
</head>
<body>




<div class="form">
	<p>Object File:</p>
	<input type="file" id="objectData" accept=".json">
	<p>Animation File:</p>
	<input type="file" id="animationData" accept=".json,.js">
	<p>Texture File:</p>
	<input type="file" id="textureImage" accept=".jpg">
	<p>Buffer Geometry File:</p>
	<input type="file" id="bufferGeometryData" accept=".json">
	<p>Material File:</p>
	<input type="file" id="materialData" accept=".json">
	<p>Material Color:</p>
	<input type="color" id="materialColor">
        <button id="LoadAllbtn">Load ALL</button>
	<button id="Perview">Perview</button>
</div>

<div class="loading">
  
</div>

<script src="three.js"></script>
<script>

var LoadALLbtn = document.gertElementById("LoadALLbtn");
var Perview = document.getElementById("Perview");
var materialColor = document.gertElementById("materialColor");
LoadALLbtn.onclick = function() {
var pathObject = document.getElementById("objectData").value;
var pathAnimation = document.getElementById("animationData").value;
var pathTexture = document.getElementById("textureImage").value;
var pathBuffer = document.getElementById("bufferGeometryData").value;
var pathMaterial = document.getElementById("materialData").value;
console.log("PREPARING SYSTEM BEFORE LOAD...");
console.log("DEFINE: animationLoader = new THREE.AnimateLoader();");
var animationLoader = new THREE.AnimationLoader();
console.log("DEFINE: objectLoader = new THREE.ObjectLoader();");
var objectLoader = new THREE.ObjectLoader();
console.log("DEFINE: textureLoader = new THREE.TextureLoader();");
var textureLoader = new THREE.TextureLoader();
console.log("DEFINE: bufferGeometryLoader = new THREE.BufferGeometryLoader();");
var bufferGeometryLoader = new THREE.BufferGeometryLoader();
console.log("DEFINE: materialLoader = new THREE.MaterialLoader();");
var materialLoader = new THREE.MaterialLoader();
console.log("SYSTEM READY");
console.log("HIDING FORM...");
form.style.visibility = 'hidden';
console.log("SHOWING LOADING SCREEN...");
loading.style.visibility = 'visible';
	
if(pathBufferGeometry){
	bufferGeometryLoader.load(
		pathBuffer,
		
		function ( geometry ) {
			var bufferGeometryData1 = geometry;
		},
		
		function ( xhr ) {
			console.log("LOADING" + pathBuffer + (xhr.loaded / xhr.total * 100) + %);
		},
				    
		function ( err ) {
			console.error(err);
		}
	);

if(pathObject){
	objectLoader.load(
		pathObject,
		
		function ( obj ) {
			var objectData1 = obj;
		},
		
		function ( xhr ) {
			console.log("LOADING" + pathObject + (xhr.loaded / xhr.total * 100) + %);
		},
				    
		function ( err ) {
			console.error(err);
		}
);
};

if(pathTexture){
	textureLoader.load(
		pathTexture,
		
		function ( texture ) {
			var textureData1 = texture;
		},
		
		undefined,
				    
		function ( err ) {
			console.error(err);
		}
		);
		
if(pathMaterial){
	materialLoader.load(
		pathMaterial,
		
		function ( material ) {
			var materialData1 = material;
		},
		
		function ( xhr ) {
			console.log("LOADING" + pathMaterial + (xhr.loaded / xhr.total * 100) + %);
		},
		
		function ( err ) {
			console.error(err);
		}
	       );
		
Perview.onclick = function() {
	removeElement(form);
	console.log("DEFINE: scene = new THREE.Scene();");
	var scene = new THREE.Scene();
        console.log("DEFINE: camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );");
	var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
	console.log("DEFINE: renderer = new THREE.WebGLRenderer();");
	var renderer = new THREE.WebGLRenderer();
	console.log("WebGL RENDERER: SETTING SIZE...");
        renderer.setSize( window.innerWidth, window.innerHeight );
	console.log("RUN: document.body.appendChild( renderer.domElement );")
        document.body.appendChild( renderer.domElement );
	console.log("DEFINE: material = new THREE.MeshBasicMaterial( { map: textureData1 } );");
	var material = new THREE.MeshBasicMaterial( { map: textureData1 } );
	if(textureData1){
		
	console.log("DEFINE: object = new THREE.Mesh( bufferGeometryData1, materialData1 );");
	var object = new THREE.Mesh( bufferGeometryData1, materialData1 );
        
	} else {
		console.log("DEFINE: material = new THREE.MeshBasicMaterial( { color: 0x")
	        console.log("DEFINE: object = new THREE.Mesh( bufferGeometryData1, material );");
};
	
function removeElement(elementId) {
    // Removes an element from the document
    var element = document.getElementById(elementId);
    element.parentNode.removeChild(element);
};

var rgbToHex = function (rgb) { 
  var hex = Number(rgb).toString(16);
  if (hex.length < 2) {
       hex = "0" + hex;
  }
  return hex;
};

var fullColorHex = function(r,g,b) {   
  var red = rgbToHex(r);
  var green = rgbToHex(g);
  var blue = rgbToHex(b);
  return red+green+blue;
};
</script>
</body>
</html>
